# User mailcap — trimmed and corrected
# Viewer priorities: prefer terminal apps for text, GUI for multimedia/PDF.

# Plain text (mutt default viewer for text/plain)
text/plain; $EDITOR %s;

# HTML — try GUI browser first, then text-mode fallbacks
text/html; $BROWSER %s ; nametemplate=%s.html
text/html; w3m -I %{charset} -T text/html '%s'; nametemplate=%s.html; copiousoutput; needsterminal
text/html; /home/eorus/.local/bin/openfile '%s'; nametemplate=%s.html; copiousoutput
#
# XML, diffs, markdown, generic octet-stream -> open in editor
text/xml; $EDITOR %s; needsterminal
text/x-diff; $EDITOR %s; needsterminal
text/markdown; $EDITOR %s; needsterminal
application/octet-stream; $EDITOR %s; needsterminal

# PDF — prefer lightweight GTK/QT viewer (zathura), fallback to system default
application/pdf; zathura %s
image/pdf; zathura %s
application/pdf; /home/eorus/.local/bin/openfile '%s'

# Images — open in image viewer
image/*; vimiv %s
image/*; /home/eorus/.local/bin/openfile '%s'

# Video/audio — use mpv in background
video/*; setsid /usr/bin/mpv --really-quiet '%s' &; copiousoutput
video/*; /home/eorus/.local/bin/openfile '%s'
audio/*; /usr/bin/mpv '%s'
audio/*; /home/eorus/.local/bin/openfile '%s'

# Encrypted keys / PGP
application/pgp-encrypted; gpg -d '%s'; copiousoutput; needsterminal
application/pgp-keys; gpg --import '%s'; copiousoutput; needsterminal

# Office -> plain text
application/msword; pandoc --from=docx --to=plain '%s'; copiousoutput; needsterminal
application/rtf; pandoc --from=rtf --to=plain '%s'; copiousoutput; needsterminal
