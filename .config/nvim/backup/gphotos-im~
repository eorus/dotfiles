#!/usr/bin/env bash
# Google Photos–like auto-enhance using ImageMagick 7
# Non-destructive: creates _enhanced copies for all JPEG images in the current folder

shopt -s nullglob nocaseglob

for img in *.jpg *.jpeg *.JPG *.JPEG; do
    base="${img%.*}"
    ext="${img##*.}"
    dest="${base}_enhanced.${ext}"

    echo "Enhancing $img → $dest..."

    # Auto-enhance: normalize, increase contrast, adjust brightness, sharpen
    magick "$img" \
        -auto-level \
        -auto-gamma \
        -modulate 105,120,100 \
        -contrast-stretch 0 \
        -sharpen 0x1.0 \
        "$dest"

done

echo "All images processed! _enhanced copies created."
