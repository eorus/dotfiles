#!/bin/sh

CONFIG=~/Templates/suckless/dwm/config.h
OUT=~/.local/share/dwm-cheatsheet.txt

# Keymask mappings
mask() {
    sed -E \
        -e 's/MODKEY/Mod/g' \
        -e 's/ShiftMask/Shift/g' \
        -e 's/ControlMask/Ctrl/g' \
        -e 's/Mod1Mask/Alt/g'
}

# Function name mappings
func() {
    sed -E \
        -e 's/spawn/→ open/' \
        -e 's/killclient/→ close window/' \
        -e 's/focusstack/→ focus next/prev window/' \
        -e 's/togglebar/→ toggle status bar/' \
        -e 's/setlayout/→ change layout/' \
        -e 's/zoom/→ swap master window/' \
        -e 's/view/→ view tag/' \
        -e 's/tag/→ send window to tag/' \
        -e 's/quit/→ quit dwm/'
}

# Parse config.h
grep -E '^\s*{.*XK_' "$CONFIG" \
  | sed -E 's/\{(.*)\},/\1/' \
  | awk -F',' '{ print $1,$2,$3 }' \
  | mask \
  | func \
  | sed -E 's/XK_([a-zA-Z0-9_]+)/\1/g' \
  > "$OUT"

echo "DWM cheatsheet generated at $OUT"
