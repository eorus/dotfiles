#!/usr/bin/env bash
# Google Photos–like auto-enhance with G'MIC
# Processes all JPEGs in the current folder and creates *_enhanced.jpg

shopt -s nullglob nocaseglob

for img in *.jpg *.jpeg *.JPG *.JPEG; do
    # Skip files that are already enhanced
    [[ "$img" == *_enhanced* ]] && continue

    base="${img%.*}"
    out="${base}_enhanced.jpg"

    echo "Enhancing: $img → $out"

    # Auto-enhance using G'MIC
    gmic "$img" \
        -normalize_local 0,100%,0,0,1 \
        -equalize 0 \
        -sharpen 50 \
        -output "$out" jpeg 95
done

echo "All images processed!"
