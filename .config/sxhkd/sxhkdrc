# ┌─────────────┐
# │  ALPHONZO   │
# └─────────────┘
# ─────────────────────────────────────────────
# sxhkd configuration for BSPWM
# DWM-like behavior: focus stack, swap, master area, layouts
# Compatible with polybar / rofi / Nerd Fonts
# ─────────────────────────────────────────────

# ─── Reload SXHKD ───────────────────────────
# Reload sxhkd configuration
super + Escape
  pkill -USR1 -x sxhkd && notify-send -i preferences-desktop-keyboard-shortcuts "sxhkd" "Reloaded config"

# ─── Programs / Applications ─────────────────

# Launch terminal
super + shift + Return
  $TERMINAL

# Launch browser
super + w
  $BROWSER

# Launch nmtui (network manager)
super + shift + w
  $TERMINAL -e sudo nmtui

# Launch ranger
super + r
  $TERMINAL -e ranger

# Launch Thunar file manager
super + shift + r
  thunar

# Launch neomutt
super + e
  $TERMINAL -e neomutt

# Launch newsboat
super + n
  $TERMINAL -e newsboat

# Open Vimwiki in nvim
super + v
  $TERMINAL -e nvim -c "VimwikiIndex"

# Rofi calculator
super + a
  rofi -show calc -modi calc -no-show-match -no-sort

# Rofi application launcher
super + d
  rofi -lines 12 -padding 18 -width 60 -location 0 -show drun \
       -sidebar-mode -line-padding 4 -columns 3 -show-icons \
       -drun-icon-theme "Papirus-Dark" -font 'Noto Sans 10'

# Rofi window switcher
alt + Tab
  rofi -show window -config ~/.config/rofi/rofidmenu.rasi

# Dmenu application launcher
super + shift + d
  dmenu_run -i -fn 'JetBrainsMono Nerd Font:size=10' \
            -nb '#1d2021' -nf '#ebdbb2' -sb '#458588' -sf '#1d2021'

# ─── Window / Node Management ───────────────
# Close focused window
super + q
  bspc node -c

# Kill focused window process
super + shift + q
  kill -9 "$(xdotool getwindowfocus getwindowpid)"

# Quit or restart bspwm
shift + alt + {q,r}
  bspc {quit,wm -r}

# Hide/Unhide Window
super + BackSpace
	~/.local/bin/winhide


# ─── Layout / DWM-like ──────────────────────
super + space
    bspc desktop -l next           # Cycle layouts: tiled → floating → monocle
super + t
    bspc node -t tiled             # Toggle tiled
super + shift + space
    bspc node -t ~floating         # Toggle floating
super + shift + Pause
    bspc node focused -t floating; bspc node -d '^7'

# Swap focused with master
super + Return
    bspc node -s $(bspc query -N -n .tiled | head -n 1)

# Rotate current window
super + y
    bspc node @focused:/ -R 90

# Swap with biggest local or next window
super + Return
    bspc node -s biggest.local || bspc node -s next.local

super + {comma,m}
	bspc node 'focused.!floating.!fullscreen.window#@/' -C {backward,forward}

# Change window states: tiled, pseudo-tiled, floating, fullscreen
super + {t,shift + t,s,f}
  bspc node -t {tiled,pseudo_tiled,floating,fullscreen}

# ─── Focus / Swap (DWM stack) ──────────────
super + j
    bspc node -f next.local.!hidden.window   # Focus next
super + k
    bspc node -f prev.local.!hidden.window   # Focus previous
super + shift + j
    bspc node -s next.local                  # Swap next
super + shift + k
    bspc node -s prev.local                  # Swap previous
super + {h,l}
    bspc node -z {left -10 0,right 10 0}    # Resize master area (shrink/grow)

# ─── Move / Resize Floating Windows ─────────
super + {Left,Down,Up,Right}
    bspc node -v {-20 0,0 20,0 -20,20 0}     # Move floating

# expand a window by moving one of its side outward
super + alt + {h,j,k,l}
    bspc node -z {left -20 0,bottom 0 10,top 0 -20,right 10 0}  # Resize floating
#
# contract a window by moving one of its side inward
super + alt + shift + {h,j,k,l}
	bspc node -z {right -20 0,top 0 20,bottom 0 -20,left 20 0}

# ─── Desktop Navigation ────────────────────
super + {_,shift + }{1-9,0}
    bspc {desktop -f,node -d} ^{1-9,10}       # Switch desktop / move window

super + bracket{left,right}
    bspc desktop -f {prev,next}.local

super + {grave,Tab}
    bspc {node,desktop} -f last               # Focus last

# Toggle gaps
super + shift + x
	bspc config window_gap {0,15}

# Increase/descrease gap size
super { ,+ shift }+ z
	bspc config window_gap $(($(bspc config window_gap) {+,-} 3))

super + u
	cat /tmp/dropdown | xargs -I win bspc node win --flag hidden;bspc node -f win

# ─── Screenshot ───────────────────────────
# Fullscreen screenshot
super + Print
  maim ~/Pictures/screenshots/pic-full-$(date '+%y%m%d-%H%M-%S').png

# Area screenshot, copy to clipboard
shift + Print
  sh -c 'FILE=~/Pictures/screenshots/pic-selected-$(date "+%y%m%d-%H%M-%S").png; maim -s "$FILE" && xclip -selection clipboard -t image/png -i "$FILE"'

# ─── Power / System ───────────────────────
# Launch power menu
super + End
    ~/.local/bin/powermenu

# Shutdown computer
XF86PowerOff
  prompt "Shutdown computer?" "sudo -A shutdown -h now"

# Hibernate system
XF86Sleep
  prompt 'Hibernate computer?' 'sudo -A zzz'

# Volume up/down
XF86Audio{RaiseVolume,LowerVolume}
  pactl set-sink-volume @DEFAULT_SINK@ {+10%,-10%}

# Toggle mute
XF86AudioMute
  pactl set-sink-mute "$(pactl info | grep 'Default Sink:' | sed 's/.*: //')" toggle

# Brightness up/down using brightnessctl
XF86MonBrightnessUp
  brightnessctl set +10%

XF86MonBrightnessDown
  brightnessctl set 10%-

# ─── Media Keys ────────────────────────────
# Music play/pause toggle
super + p
  mpc toggle

# Pause all
super + shift + p
  mpc pause; pauseallmpv

# Spotify stop/play
super + gbreve
  playerctl stop
super + udiaeresis
  playerctl play-pause

# Next / Previous track
super + {comma,period}
  playerctl {previous,next}

# Seek start
super + shift + less
  mpc seek 0%

# Seek forward/backward
super + {_,shift +} bracketright
  mpc seek +{10,120}
super + {_,shift +} bracketleft
  mpc seek -{10,120}

# Increase / Decrease volume
super {_,shift +} + plus
  amixer sset Master {5,15}%+; pkill -RTMIN+10 $STATUSBAR
super {_,shift +} + minus
  amixer sset Master {5,15}%-; pkill -RTMIN+10 $STATUSBAR

# Toggle mute
super + shift + m
  amixer sset Master toggle; pkill -RTMIN+10 $STATUSBAR

# ─── XF86 / System Shortcuts ─────────────
XF86Calculator
  $TERMINAL -e bc

XF86WWW
  $BROWSER

XF86DOS
  $TERMINAL

XF86ScreenSaver
  mpc pause; pauseallmpv; i3lock -e -f -c 1d2021; xset dpms force off

XF86TaskPane
  $TERMINAL -e htop

XF86Mail
  $TERMINAL -e neomutt

XF86Tools
  $FILE ~/

# ─── Function Keys ─────────────────────────
super + F1
 ~/.local/bin/cheatsheet

super + F2
 ~/.local/bin/dmenu-calc

super + F3
 ~/.local/bin/displayselect

super + F4
 pavucontrol

super + F5
 ~/.local/bin/dmenulaunch

super + F7
 ~/.local/bin/newsup

super + F8
 ~/.local/bin/rssadd

super + F11
  mpv --untimed --no-cache --no-osc --no-input-default-bindings --profile=low-latency --input-conf=/dev/null --title=webcam $(ls /dev/video[0,2,4,6,8] | tail -n 1)

super + F12
  ~/.local/bin/toggle_tv.sh
